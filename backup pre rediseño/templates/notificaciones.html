{% extends "base.html" %}

{% block title %}Notificaciones de Stock{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2><i class="bi bi-bell me-2"></i> Notificaciones de Stock</h2>
    {% if session.get('notificaciones') and session['notificaciones']|length > 0 %}
    <form method="post" action="{{ url_for('borrar_todas_notificaciones') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button type="submit" class="btn btn-danger">Borrar todas</button>
    </form>
    {% endif %}
</div>
{% if session.get('notificaciones') and session['notificaciones']|length > 0 %}
<ul class="list-group mb-4">
    {% for n in session['notificaciones'] %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>{{ n.mensaje }}</span>
        <form method="post" action="{{ url_for('borrar_notificacion', idx=loop.index0) }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="btn btn-outline-secondary btn-sm">Borrar</button>
        </form>
    </li>
    {% endfor %}
</ul>
{% else %}
<p class="text-muted">No hay notificaciones pendientes.</p>
{% endif %}
{% endblock %}